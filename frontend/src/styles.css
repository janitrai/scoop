@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=Manrope:wght@400;500;700;800&family=Space+Grotesk:wght@500;700&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply box-border;
  }

  html,
  body,
  #root {
    @apply min-h-full;
  }

  body {
    @apply m-0 bg-panel-900 text-panel-100 font-sans;
  }
}

@layer components {
  .app-root {
    @apply flex min-h-screen flex-col pb-8 pt-6;
    padding-inline: clamp(14px, 3vw, 32px);
  }

  .app-root-viewer {
    @apply h-[100dvh] min-h-0 overflow-hidden p-0;
  }

  .topbar {
    @apply mb-4 flex flex-wrap items-center gap-2.5 rounded-[14px] border border-panel-500 px-3 py-2.5 shadow-panel;
    background-color: rgba(21, 27, 36, 0.9);
    backdrop-filter: blur(12px);
  }

  .topbar-left {
    @apply flex min-w-0 flex-1 items-center gap-2.5;
  }

  .topbar-mark {
    @apply inline-flex h-8 w-8 shrink-0 items-center justify-center rounded-full border border-brand-500 bg-[#13233f] font-display text-[0.9rem] font-bold text-[#dce8ff];
  }

  .topbar-copy {
    @apply min-w-0;
  }

  .topbar-kicker {
    @apply m-0 text-[0.62rem] font-bold uppercase tracking-[0.14em] text-panel-400;
  }

  .topbar-title {
    @apply m-0 truncate font-display tracking-[-0.02em] text-panel-100;
    font-size: clamp(1rem, 2vw, 1.35rem);
  }

  .top-tabs {
    @apply flex items-center gap-1 rounded-full border border-panel-500 bg-panel-700 p-1;
  }

  .top-tab {
    @apply rounded-full border border-transparent px-3 py-1.5 text-[0.72rem] font-extrabold uppercase tracking-[0.08em] text-panel-400 no-underline transition-colors duration-150;
  }

  .top-tab:hover {
    @apply text-panel-100;
  }

  .top-tab.active {
    @apply border-brand-500 bg-brand-500 text-white;
  }

  .eyebrow {
    @apply mb-1.5 mt-0 text-[0.72rem] font-bold uppercase tracking-[0.14em] text-panel-400;
  }

  .topbar-meta {
    @apply ml-auto max-w-[340px] truncate text-right font-mono text-[0.74rem] text-panel-400;
  }

  .card {
    @apply rounded-[14px] border border-panel-500 bg-panel-800 shadow-panel;
  }

  .controls {
    @apply mb-4 p-[14px];
  }

  .controls-top-row {
    @apply grid grid-cols-[minmax(300px,380px)_minmax(0,1fr)] items-start gap-2.5;
  }

  .search-strip {
    @apply min-w-0;
  }

  .finder-row {
    @apply grid grid-cols-[1fr_auto_auto] items-center gap-2;
  }

  .finder-input-wrap {
    @apply flex min-h-10 items-center gap-2 rounded-[10px] border border-panel-500 bg-panel-600 px-2.5;
  }

  .finder-input-wrap:focus-within {
    @apply border-brand-500 ring-2 ring-brand-500/35;
  }

  .finder-icon {
    @apply font-mono text-[0.82rem] font-bold text-panel-400;
  }

  .finder-input-wrap input {
    @apply w-full border-0 bg-transparent px-0 py-0 text-[0.9rem] text-panel-100 outline-none;
  }

  .finder-clear {
    @apply cursor-pointer border-0 bg-transparent px-1 font-mono text-[0.8rem] font-bold uppercase text-panel-400;
  }

  .finder-clear:hover {
    @apply text-panel-100;
  }

  .finder-advanced-btn {
    @apply px-[11px] text-[0.78rem] uppercase tracking-[0.08em];
  }

  .finder-advanced-btn.active {
    @apply border-brand-500 bg-[#13233f] text-[#dce8ff];
  }

  .advanced-row {
    @apply mt-2.5 grid grid-cols-[minmax(120px,180px)_minmax(120px,180px)] gap-2.5;
  }

  .field {
    @apply flex flex-col gap-1.5 text-[0.82rem] font-bold text-panel-400;
  }

  .field input {
    @apply w-full rounded-[10px] border border-panel-500 bg-panel-600 px-[11px] py-[10px] text-[0.92rem] text-panel-100 outline-none;
  }

  .field input:focus {
    @apply border-brand-500 ring-2 ring-brand-500/35;
  }

  .chips-row {
    @apply mt-3 flex flex-wrap gap-2;
  }

  .day-strip {
    @apply mt-0;
  }

  .day-nav {
    @apply grid grid-cols-[auto_minmax(0,1fr)_auto] items-center gap-2;
  }

  .day-nav-btn {
    @apply w-[42px] min-w-[42px] p-0 text-base;
  }

  .day-current-btn {
    @apply min-h-10 w-full cursor-pointer rounded-xl border border-panel-500 bg-panel-600 px-3 py-1.5 text-panel-100;
    @apply flex items-center justify-center;
  }

  .day-current-line {
    @apply block max-w-full truncate text-center font-display text-[0.9rem] font-bold tracking-[0.01em];
  }

  .day-current-btn:hover {
    @apply border-brand-500/60;
  }

  .day-current-btn:focus {
    @apply border-brand-500/60 ring-2 ring-brand-500/35;
  }

  .day-picker-input {
    @apply pointer-events-none absolute h-px w-px opacity-0;
  }

  .chip {
    @apply cursor-pointer rounded-full border border-panel-500 bg-panel-600 px-2.5 py-[7px] text-[0.78rem] font-bold tracking-[0.02em] text-panel-100;
  }

  .chip.active {
    @apply border-brand-500 bg-[#13233f] text-[#dce8ff];
  }

  .chip:disabled {
    @apply cursor-not-allowed opacity-45;
  }

  .btn {
    @apply min-h-10 cursor-pointer rounded-[10px] border border-transparent bg-brand-500 px-[14px] py-[10px] text-[0.9rem] font-extrabold tracking-[0.01em] text-white;
  }

  .btn:hover {
    @apply bg-brand-400;
  }

  .btn:disabled {
    @apply cursor-not-allowed opacity-45;
  }

  .btn.btn-subtle {
    @apply border-panel-500 bg-panel-600 text-panel-100;
  }

  .stats-grid {
    @apply mb-4 grid grid-cols-4 gap-2.5;
  }

  .stats-toolbar {
    @apply mb-4 flex items-center justify-between gap-3 p-[14px];
  }

  .stats-toolbar-copy {
    @apply min-w-0;
  }

  .stats-updated {
    @apply m-0 truncate font-mono text-[0.76rem] text-panel-400;
  }

  .stats-secondary-grid {
    @apply grid grid-cols-2 gap-2.5 bg-transparent border-0 p-0 shadow-none;
  }

  .stat {
    @apply p-3;
  }

  .stat-label {
    @apply mb-2 mt-0 text-[0.74rem] font-bold uppercase tracking-[0.14em] text-panel-400;
  }

  .stat-value {
    @apply m-0 font-display text-[clamp(1.2rem,2vw,1.7rem)] font-bold;
  }

  .layout {
    @apply min-h-0 flex-1 overflow-hidden;
  }

  .layout-panels {
    @apply h-full min-h-0 w-full;
  }

  .layout-panels > [data-panel] {
    @apply min-h-0 min-w-0;
    display: flex;
  }

  .layout-resize-handle {
    @apply bg-panel-500 transition-colors duration-150;
  }

  .layout-resize-handle.horizontal {
    width: 1px;
    cursor: col-resize;
  }

  .layout-resize-handle.vertical {
    height: 1px;
    cursor: row-resize;
  }

  .layout-resize-handle:hover {
    @apply bg-brand-500;
  }

  .layout-resize-handle:focus {
    @apply bg-brand-500 outline-none;
  }

  .layout-resize-handle[data-resize-handle-active] {
    @apply bg-brand-500;
  }

  .app-root-viewer .topbar {
    @apply mb-0 rounded-none border-x-0 px-3 py-2 shadow-none;
  }

  .app-root-viewer .controls {
    @apply mb-0 rounded-none border-x-0 px-3 py-2 shadow-none;
  }

  .app-root-viewer .banner-error {
    @apply mb-0 rounded-none border-x-0;
  }

  .app-root-viewer .controls-top-row {
    @apply gap-0;
  }

  .app-root-viewer .layout-panels {
    border-top: 1px solid #2a3443;
  }

  .app-root-viewer .panel.card {
    @apply rounded-none border-0 bg-transparent shadow-none;
  }

  .app-root-viewer .panel-header {
    @apply mb-0 border-b border-panel-500 px-3 py-2;
  }

  .app-root-viewer .stories-list,
  .app-root-viewer .detail-content {
    @apply gap-0 pr-0;
  }

  .app-root-viewer .story-card {
    @apply rounded-none border-0 border-b border-panel-500 bg-transparent px-3 py-2;
  }

  .app-root-viewer .story-card:hover {
    @apply translate-y-0 border-brand-500/45 bg-[#16223566];
  }

  .app-root-viewer .story-card.active {
    @apply border-brand-500 bg-[#1622357a] shadow-none;
  }

  .app-root-viewer .member-grid {
    @apply gap-0;
  }

  .app-root-viewer .member-card {
    @apply rounded-none border-0 border-b border-panel-500 bg-transparent px-3 py-2;
  }

  .app-root-viewer .stories-status,
  .app-root-viewer .detail-content > .muted {
    @apply px-3 py-2;
  }

  .app-root-viewer .stories-load-sentinel {
    @apply h-px;
  }

  .app-root-viewer .detail-meta,
  .app-root-viewer .detail-url {
    @apply px-3;
  }

  .app-root-viewer .member-grid .muted {
    @apply px-3 py-2;
  }

  .app-root-viewer .day-current-btn,
  .app-root-viewer .finder-input-wrap,
  .app-root-viewer .btn,
  .app-root-viewer .btn.btn-subtle,
  .app-root-viewer .chip {
    @apply rounded-none;
  }

  .app-root-viewer .chips-row {
    @apply mt-2;
  }

  .app-root-viewer .top-tabs,
  .app-root-viewer .top-tab {
    @apply rounded-none;
  }

  .app-root-viewer .topbar-mark {
    @apply rounded-none;
  }

  .app-root-viewer .layout-resize-handle.horizontal {
    width: 2px;
  }

  .app-root-viewer .layout-resize-handle.vertical {
    height: 2px;
  }

  .app-root-viewer .stories-list > .muted,
  .app-root-viewer .detail-content > .muted {
    @apply px-3 py-2;
  }

  .app-root-viewer .detail-content > .member-grid {
    @apply mt-1;
  }

  .app-root-viewer .stories-list::-webkit-scrollbar,
  .app-root-viewer .detail-content::-webkit-scrollbar {
    width: 8px;
  }

  .app-root-viewer .stories-list::-webkit-scrollbar-thumb,
  .app-root-viewer .detail-content::-webkit-scrollbar-thumb {
    background: #2a3443;
  }

  .app-root-viewer .stories-list::-webkit-scrollbar-track,
  .app-root-viewer .detail-content::-webkit-scrollbar-track {
    background: transparent;
  }

  .app-root-viewer .topbar-left {
    @apply min-w-0;
  }

  .app-root-viewer .topbar-title {
    @apply truncate;
  }

  .app-root-viewer .layout {
    @apply gap-0;
  }

  .app-root-viewer .controls-top-row {
    grid-template-columns: minmax(280px, 35vw) minmax(0, 1fr);
  }

  .app-root-viewer .day-nav {
    @apply gap-0;
  }

  .app-root-viewer .finder-row {
    @apply gap-0;
  }

  .app-root-viewer .advanced-row {
    @apply mt-0 gap-0;
  }

  .app-root-viewer .field input {
    @apply rounded-none;
  }

  .app-root-viewer .search-strip {
    @apply pl-0;
  }

  .app-root-viewer .controls-top-row > * + * {
    border-left: 1px solid #2a3443;
  }

  .app-root-viewer .day-nav > * + * {
    border-left: 1px solid #2a3443;
  }

  .app-root-viewer .finder-row > * + * {
    border-left: 1px solid #2a3443;
  }

  .app-root-viewer .chip {
    @apply border-x-0 border-t-0 border-b border-panel-500 px-3;
  }

  .app-root-viewer .chip.active {
    @apply border-brand-500 bg-[#13233f4d] text-[#dce8ff];
  }

  .app-root-viewer .story-topline {
    @apply mb-1;
  }

  .app-root-viewer .story-meta {
    @apply mt-1;
  }

  .app-root-viewer .stories-list {
    @apply pb-2;
  }

  .app-root-viewer .detail-content {
    @apply pb-2;
  }

  .app-root-viewer .member-sub {
    @apply mt-1;
  }

  .app-root-viewer .decision-pill {
    @apply mt-1;
  }

  .app-root-viewer .day-current-line {
    @apply px-2;
  }

  .app-root-viewer .topbar-copy {
    @apply min-w-0;
  }

  .app-root-viewer .topbar-kicker {
    @apply mb-0;
  }

  .app-root-viewer .topbar-meta {
    @apply max-w-none;
  }

  .app-root-viewer .panel {
    @apply p-0;
  }

  .app-root-viewer .stories-list,
  .app-root-viewer .detail-content {
    scrollbar-gutter: stable both-edges;
  }

  .app-root-viewer .controls,
  .app-root-viewer .topbar,
  .app-root-viewer .banner-error {
    @apply border-b border-panel-500;
  }

  .app-root-viewer .controls,
  .app-root-viewer .topbar {
    border-top: 0;
  }

  .app-root-viewer .stories-list {
    border-right: 1px solid #2a3443;
  }

  .app-root-viewer .layout-resize-handle.horizontal {
    background: #2a3443;
  }

  .app-root-viewer .layout-resize-handle.horizontal:hover,
  .app-root-viewer .layout-resize-handle.horizontal[data-resize-handle-active] {
    background: #4f8cff;
  }

  .app-root-viewer .detail-content {
    @apply pl-0;
  }

  .app-root-viewer .detail-content > * {
    @apply px-3;
  }

  .app-root-viewer .detail-content > .member-grid {
    @apply px-0;
  }

  .app-root-viewer .member-card > * {
    @apply px-0;
  }

  .app-root-viewer .stories-list > * {
    @apply mx-0;
  }

  .app-root-viewer .controls .chips-row {
    @apply mt-0;
  }

  .app-root-viewer .chips-row {
    border-top: 1px solid #2a3443;
  }

  .app-root-viewer .stories-load-sentinel,
  .app-root-viewer .stories-status {
    @apply border-b border-panel-500;
  }

  .app-root-viewer .layout {
    @apply overflow-hidden;
  }

  .panel {
    @apply flex h-full min-h-0 flex-col p-[14px];
  }

  .panel-header {
    @apply mb-2.5 flex items-start justify-between gap-[14px];
  }

  .panel h2 {
    @apply m-0 font-display text-[1.2rem];
  }

  .pager {
    @apply flex items-center gap-2;
  }

  .page-label {
    @apply font-mono text-[0.82rem] text-panel-400;
  }

  .stories-list {
    @apply min-h-0 flex-1 overflow-y-auto pr-1;
    @apply flex flex-col gap-2.5;
  }

  .stories-load-sentinel {
    @apply h-4 w-full;
  }

  .stories-status {
    @apply mb-0 mt-1;
  }

  .story-card {
    @apply cursor-pointer rounded-xl border border-panel-500 bg-panel-700 p-3 transition duration-100 ease-out;
  }

  .story-card:hover {
    @apply -translate-y-px border-brand-500/60;
  }

  .story-card.active {
    @apply border-brand-500/80 shadow-[0_0_0_1px_rgba(79,140,255,0.6)];
  }

  .story-topline {
    @apply mb-2 flex items-center gap-[7px];
  }

  .badge {
    @apply inline-flex rounded-full px-2 py-1 text-[0.68rem] font-extrabold uppercase tracking-[0.09em];
  }

  .badge.collection {
    @apply bg-[#1e2b40] text-[#b3ccff];
  }

  .badge.count {
    @apply bg-[#2a2420] text-[#f2c69a];
  }

  .story-title {
    @apply m-0 text-base leading-[1.35];
  }

  .story-meta {
    @apply mb-0 mt-2 font-mono text-[0.8rem] text-panel-400;
  }

  .muted {
    @apply text-panel-400;
  }

  .detail-content {
    @apply min-h-0 flex-1 overflow-y-auto pr-1;
    @apply flex flex-col gap-2.5;
  }

  .detail-meta {
    @apply m-0 font-mono text-[0.8rem] text-panel-400;
  }

  .detail-url {
    @apply inline-block break-words text-[#97b7ff] no-underline;
  }

  .detail-url:hover {
    @apply text-[#b5ccff];
  }

  .member-grid {
    @apply grid gap-2;
  }

  .member-card {
    @apply rounded-[10px] border border-panel-500 bg-panel-650 p-2.5;
  }

  .member-head {
    @apply m-0 text-[0.86rem] font-extrabold;
  }

  .member-sub {
    @apply mb-0 mt-1.5 font-mono text-[0.74rem] text-panel-400;
  }

  .decision-pill {
    @apply mt-1.5 inline-block rounded-full px-2 py-1 text-[0.67rem] font-extrabold uppercase tracking-[0.08em];
  }

  .decision-auto_merge {
    @apply bg-[#46c37b33] text-[#8fe6b2];
  }

  .decision-new_story,
  .decision-gray_zone {
    @apply bg-[#ffbf7833] text-[#ffd8ad];
  }

  .banner-error {
    @apply mb-3 mt-0 rounded-[10px] border border-[#ff7b7273] bg-[#7a1c1859] px-3 py-2.5 text-[0.86rem] text-[#ffb6b0];
  }
}

@media (max-width: 1020px) {
  .layout {
    @apply grid-cols-1;
    grid-template-rows: minmax(260px, 1fr) minmax(260px, 1fr);
  }
}

@media (max-width: 760px) {
  .app-root {
    @apply p-[14px];
  }

  .app-root-viewer {
    @apply h-[100dvh] pb-3;
  }

  .finder-row {
    @apply grid-cols-[1fr_auto];
  }

  .finder-row .finder-input-wrap {
    grid-column: span 2;
  }

  .controls-top-row {
    @apply grid-cols-1;
  }

  .advanced-row {
    @apply grid-cols-1;
  }

  .stats-grid {
    @apply grid-cols-2;
  }

  .stats-secondary-grid {
    @apply grid-cols-1;
  }

  .stats-toolbar {
    @apply items-start;
  }

  .topbar {
    @apply gap-2;
  }

  .topbar-left {
    @apply w-full;
  }

  .top-tabs {
    @apply w-full justify-start;
  }

  .top-tab {
    @apply flex-1 text-center;
  }

  .topbar-meta {
    @apply w-full text-left;
  }

  .topbar-title {
    font-size: 1.08rem;
  }

  .topbar-kicker {
    @apply text-[0.58rem];
  }

  .topbar-mark {
    @apply h-7 w-7 text-[0.82rem];
  }

  .day-nav {
    @apply grid grid-cols-[auto_1fr_auto] gap-2;
  }

  .day-current-btn {
    min-width: 0;
  }
}
